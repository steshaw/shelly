#!/usr/bin/env bash

set -eu

brew tap homebrew/versions

shellyEtc=~/.shelly/etc

packages=$(
  cat ${shellyEtc}/brew.pkgs |
  grep -v '^#' |
  grep -v '^\s*$' |
  grep -v --fixed-strings --file ${shellyEtc}/brew.pkgs.exceptions
)

for pkg in ${packages}; do
  brew install "${pkg}"
done

#
# Now install the exceptions
#
# TODO: How to get Homebrew to tell me how it installed stuff?
#

#
# weechat â€” weechat.org
#
# Best installed with these options.
#
brew install curl aspell # just in case these have been removed from brew.pkgs
brew install weechat --with-aspell --with-curl
