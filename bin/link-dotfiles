#!/bin/bash

fromDir=$(dirname $0)/../dotfiles

if [[ ! -f $fromDir/.bashrc ]]; then
  echo Cannot find $fromDir/.bashrc
  exit 1
fi

echo fromDir=${fromDir}

for file in ${fromDir}/.[a-z]*; do
  basefile=$(basename $file)
  if [[ -f ~/$basefile ]]; then
    if [[ -L ~/$basefile ]]; then
      echo ${basefile} already a link to $(readlink -f ~/${basefile})
    else
      echo Moving existing ${basefile} to ${basefile}.old
      mv -i ~/${basefile} ~/${basefile}.old
      ln -s $file ~
    fi
  else
    echo Linking ~/${basefile}
    ln -s $file ~
  fi
done
